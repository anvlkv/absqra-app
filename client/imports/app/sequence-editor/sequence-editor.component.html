<div class="row">
    <div class="col-12 col-sm-4 col-md-3 sidebar">
        <h3>Items:</h3>
        <nav class="nav flex-column">
            <a class="nav-link active" *ngFor="let item of (items | async | itemsSort:sequence?.itemsSequence)" href="#item_{{item._id}}">{{ item.name }}</a>
            <a class="nav-link btn btn-outline-primary" (click)="createNewItem()">+ Add an item</a>

        </nav>
        <div *ngFor="let s of sequence?.itemsSequence">
            {{s}}
        </div>
    </div>
    <div class="col-12 col-sm-8 col-md-9">
        <inplace-edit-switch *ngIf="sequence" [editState]="sequenceEditorIsActive">
            <div viewer (click)="sequenceEditorIsActive = true">
                <h1 class="display-3">{{sequence.name}}</h1>
                <p class="lead">{{sequence.description}}</p>
            </div>
            <div editor *ngIf="sequenceDescriptorFormGroup">
                <form [formGroup]="sequenceDescriptorFormGroup" (ngSubmit)="saveSequenceDescriptor(sequenceDescriptorFormGroup)">
                    <fieldset class="form-group">
                        <label for="sequenceName">Sequence name:</label>
                        <small class="form-text text-muted">This name is visible to respondents</small>
                        <input class="form-control" type="text" formControlName="sequenceName" id="sequenceName" placeholder="Give your sequence a descriptive title" [(ngModel)]="sequence.name">
                    </fieldset>
                    <fieldset class="form-group">
                        <label for="sequenceDescription">Description:</label>
                        <small class="form-text text-muted">This text is <span class="caps">not</span> visible to respondents</small>
                        <textarea class="form-control" type="text" formControlName="sequenceDescription" id="sequenceDescription" placeholder="Note here all the general information" [(ngModel)]="sequence.description"></textarea>
                    </fieldset>
                    <button type="reset" (click)="sequenceEditorIsActive = false" class="btn btn-outline-secondary">Cancel editing</button>
                    <button type="submit" class="btn btn-primary">Done</button>
                </form>
            </div>
        </inplace-edit-switch>
        <!--item form-->
        <div class="col-12" dnd-sortable-container>

            <inplace-edit-switch class="card" *ngFor="let item of (items | async | itemsSort:sequence?.itemsSequence)" dnd-sortable [editState]="activeItemEditor === item._id">
                <div viewer class="card-block">
                    {{item._id}}
                    <h3>{{ item.name }}</h3>
                    <p>{{ item.description }}</p>
                </div>
                <div editor class="card-block">
                    <item-editor (onItemSaved)="finishItemEditing($event)" [itemId]="item._id"></item-editor>
                </div>
            </inplace-edit-switch >
        </div>
    </div>
</div>